<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>교회력 Liturgical Calendar</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
</head>
<body>

    <div class="container animate-fade">
        <h1>Liturgical Calendar</h1>
        
        <div id="result-area">
            <div class="season-name" id="seasonName">로딩 중...</div>
            <div class="season-desc" id="seasonDesc">날짜를 선택하세요</div>
        </div>

        <div class="date-picker-wrapper">
            <input type="date" id="dateInput">
        </div>
        
        <footer id="footerMsg">
            오늘의 예전 색상입니다
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const dateInput = document.getElementById('dateInput');
            const seasonNameEl = document.getElementById('seasonName');
            const seasonDescEl = document.getElementById('seasonDesc');
            const body = document.body;
            const footerMsg = document.getElementById('footerMsg');

            // Set Initial Date to Today
            const today = new Date();
            dateInput.valueAsDate = today;

            function updateUI(date) {
                const season = window.LiturgicalApp.getLiturgicalDetails(date);
                
                // Text Update
                seasonNameEl.textContent = season.name;
                seasonDescEl.textContent = season.desc;
                
                // Color Update logic
                // Map logical color names to CSS variables or exact hex
                const colorMap = {
                    'purple': '#6b21a8',
                    'white': '#cbd5e1', // Using a soft gray-blue for White seasons background to keep text readable, or inverse?
                    // "White" seasons are usually gold/white. 
                    // Let's use Gold for White seasons background.
                    // Actually, if background is dark, text must be light.
                    // Let's stick to the requested colors but ensuring readability.
                    'green': '#15803d',
                    'red': '#dc2626'
                };
                
                let bgColor = colorMap[season.color] || '#f8fafc';
                
                // Special handling for White to look good
                if (season.color === 'white') {
                    bgColor = '#fbbf24'; // Amber/Gold for "White/Gold" season
                    if (season.detail === '부활절' || season.name === '성탄절') {
                         bgColor = '#fcd34d'; 
                    }
                }
                
                // Apply colors
                body.style.backgroundColor = bgColor;
                
                // Adjust text contrast based on background
                // Simple logic: If Purple/Green/Red -> Dark background, Light Text needed?
                // The card is white glassmorphism, so text inside card is always dark (set in CSS .container).
                // The BODY background changes.
                // Text inside the card is safe.
                
                // Trigger animation
                seasonNameEl.classList.remove('animate-fade');
                void seasonNameEl.offsetWidth; // trigger reflow
                seasonNameEl.classList.add('animate-fade');
            }

            // Initial Update
            updateUI(today);

            // Listener
            dateInput.addEventListener('change', (e) => {
                if(e.target.valueAsDate) {
                    updateUI(e.target.valueAsDate);
                }
            });
        });
    </script>
</body>
</html>
